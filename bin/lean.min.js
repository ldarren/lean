!function(){window.__&&console.error("Another instance of lean detected")}();var __={env:{},load:function(e){var t=__.onReady(e);if(__.env.supportNative)document.addEventListener("deviceready",t,!1),__.env.loaded||__.dom.link("cordova.js","js");else{if("complete"===document.readyState)return t();window.addEventListener("load",t,!1)}__.env.loaded=1},onReady:function(e){return function(t){return 2===__.env.loaded?t():(e.push(t),function(){for(var t,n=0;t=e[n];n++)t();__.env.loaded=2,e.length=0})}}([]),dummyCB:function(){},dotchain:function e(t,n){if(!n||!n.length)return t;var o=t[n.shift()];return o?e(o,n):0},querystring:function(e){return Object.keys(e).reduce(function(t,n){return t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])),t},[]).join("&")},ajax:function(e,t,n,o,r,i){if(r=r||function(e){e&&console.error(e)},!t)return r("url not defined");n=n||{},o=o||{};var a=new XMLHttpRequest,c="POST"===(e=e.toUpperCase()),u=n.charAt?1:n instanceof FormData?3:2;if(t=encodeURI(t),c)2===u&&(n=JSON.stringify(n));else if(t+=(-1===t.indexOf("?")?"?":"&")+"appVer="+__.env.appVer||0,n){switch(t+="&",u){case 1:t+=encodeURIComponent(n);break;case 2:t+=__.querystring(n);break;case 3:return r("FormData with GET method is not supported yet")}n=null}if(a.open(e,t,void 0===o.async||o.async,o.un,o.passwd),a.timeout=o.timeout||0,a.responseType=o.responseType||"",a.onreadystatechange=function(){if(1<a.readyState){var t,c=a.status;return c>=300&&c<400&&(t=a.getResponseHeader("location"))?__.ajax(e,t,n,o,r,i):r(300>c||!c?null:{error:a.statusText,code:a.status},a.readyState,a.response,i)}},a.ontimeout=a.onerror=function(e){r({error:a.statusText,code:a.status,src:e,params:arguments},a.readyState,null,i)},c&&n)switch(u){case 1:case 2:a.setRequestHeader("Content-Type","text/plain");break;case 3:a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}var s=o.headers;for(var d in s)a.setRequestHeader(d,s[d]);switch(u){case 1:a.send(n);break;case 2:a.send(JSON.stringify(n));break;case 3:a.send(n)}return a},createEvent:function(e,t,n,o){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n||!1,o||!1,t),r},detectEvent:function(e,t){var n=document.createElement(t||"div"),o=(e="on"+e)in n||e in window;return o||(n.setAttribute(e,""),o="function"==typeof n[e],n[e]=void 0,n.removeAttribute(e)),n=void 0,o}};!function(){var e=__.env,t=document.querySelector("meta[name=app-version]"),n="transitionend",o="webkitTransitionEnd";e.transitionEnd=__.detectEvent(n)?n:__.detectEvent(o.toLowerCase())?o:void 0,e.supportPassive=!1;try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){e.supportPassive=!0}}))}catch(e){}if(e.appVer=t?t.getAttribute("content"):"0",e.loaded=0,e.supportNative=!1,-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")){var r=document.querySelector("meta[name=app-support-native]");e.supportNative=!!r&&"1"===r.getAttribute("content")}}(),function(){function e(){__.device=__.dotchain(window,["device"])||function(e,t){for(var n,o,r=e.userAgent,i="",a=0;n=t[a];a++)if(~(o=r.indexOf(n))){i=r.substr(o+n.length+1).split(/[ ;]+/,1)[0];break}return{model:n||"",version:i,platform:"web",manufacturer:e.vendor||"",cordova:0,uuid:Math.random().toString(36).substr(2)+Date.now().toString(36),isVirtual:!1,serial:""}}(navigator,["Trident","Edge","Chromium","Chrome","Safari","Firefox","OPR","Opera"])}__.onReady(e)}(),function(){function e(){var e=__.dotchain(window,["navigator","notification"]);__.dialogs=e?{alert:function(t,n,o,r){e.alert(t,r||__.dummyCB,n,o)},confirm:function(t,n,o,r){e.confirm(t,r,n,o)},prompt:function(t,n,o,r,i){e.prompt(t,i,n,o,r)},beep:function(t){e.beep(t)}}:{alert:function(e,t,n,o){setTimeout(function(){alert(e),(o||__.dummyCB)()},0)},confirm:function(e,t,n,o){setTimeout(function(){o(confirm(e)?1:2)},0)},prompt:function(e,t,n,o,r){setTimeout(function(){var t=prompt(e,o);r({buttonIndex:t?1:2,input1:t})},0)},beep:function(){console.log("beep")}}}__.onReady(e)}(),function(){var e=document.head||document.getElementsByTagName("head")[0],t=["el","tagName","id","className","content"],n=function(e){if(e){if(e instanceof HTMLElement)return e;var t=e.el;return t?t.charAt&&(t=document.querySelector(t)):t=document.createElement(e.tagName||"div"),setId(t,e.id),setClasses(t.classList,e.className),setAttributes(t,e),setContent(t,e.content),t}},o=function(e,t,r){r>=t.length||(e.appendChild(n(t[r++])),o(e,t,r))};setId=function(e,t){t&&(e.id=t)},setClasses=function(e,t){t&&t.length&&e.add.apply(e,Array.isArray(t)?t:t.split(" "))},setAttributes=function(e,n){if(n)for(var o,r,i=0,a=Object.keys(n);o=a[i];i++)~t.indexOf(o)||null!=(r=n[o])&&void 0!=r&&e.setAttribute(o,r)},setContent=function(e,t){void 0!=t&&null!=t&&(t.charAt?e.innerHTML=t:o(e,t,0))},__.dom={link:function(t,n,o){var r;switch(n){case"js":return(r=document.createElement("script")).setAttribute("src",t),r.onload=o,void(r.onerror=o.insertBefore(r,e.lastChild));case"css":return(r=document.createElement("link")).setAttribute("rel","stylesheet"),r.setAttribute("href",t).insertBefore(r,e.lastChild),setTimeout(o,0);default:return o()}},unlink:function(e,t){var n,o;switch(t){case"js":o=document.getElementsByTagName("script"),n="src";break;case"css":o=document.getElementsByTagName("link"),n="href";break;default:return}for(var r,a;r=o[i];i--)(a=r.getAttribute(n))&&~a.indexOf(e)&&r.parentNode.removeChild(r)},setId:setId,setClasses:setClasses,setAttributes:setAttributes,setContent:setContent,get:n,style:function(t,n){if(n&&n.length){var o=e.querySelector("#"+t);if(o)return o.dataset.rc=1+o.dataset.rc;(o=document.createElement("style")).id=t,o.dataset.rc=1,o.appendChild(document.createTextNode(n)),e.appendChild(o)}},unstyle:function(t){var n=e.querySelector("#"+t);if(n){var o=n.dataset;o.rc=o.rc-1,0==o.rc&&n.parentNode.removeChild(n)}}}}(),function(){if(!__.detectEvent("touchstart")){var e=!__.env.supportPassive||{capture:!0,passive:!0},t="mousedown",n="mouseup",o="mousemove",r="mouseout",i=function(e){var i;switch(e.type){case t:i="touchstart";break;case n:i="touchend";break;case o:i="touchmove";break;case r:i="touchcancel";break;default:return console.error("wrong event: "+e.type)}var a=e.target,c=[{pageX:e.pageX,pageY:e.pageY,target:a}],u=__.createEvent(i,null,e.bubbles,e.cancelable);u.pageX=e.pageX,u.pageY=e.pageY,u.touches=u.changedTouches=u.targetTouches=c,u.mouseToTouch=!0,a.dispatchEvent(u)},a=function(){document.removeEventListener(t,c),document.removeEventListener(o,u),document.removeEventListener(n,s),document.removeEventListener(r,d)},c=function(t){a(),document.addEventListener(o,u,e),document.addEventListener(n,s,e),document.addEventListener(r,d,e),i(t)},u=function(e){i(e)},s=function(n){a(),document.addEventListener(t,c,e),i(n)},d=function(n){a(),document.addEventListener(t,c,e),i(n)};document.addEventListener(t,c,e)}}(),function(){function e(){var e,t=__.dotchain(window,["sqlitePlugin"]),n=__.dotchain(window,["openDatabase"]),o=function(e){if(e)return console.error(e)},r={};t||n?(e=function(e){var n;(n=t?t.openDatabase({name:e,location:"default"}):openDatabase(e,"1.0","lean local storage emulator",52428800)).transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS kv (key TEXT UNIQUE NOT NULL, val TEXT);",null,null,function(e,t){console.error(t)})}),this.db=n}).prototype={key:function(e,t){this.db.readTransaction(function(n){n.executeSql("SELECT key FROM KV order by oid ASC;",null,function(n,o){var r=o.rows;if(r.length<=e)return t();t(null,r[e].key)},function(e,n){t(n)})})},getItem:function(e,t){this.db.readTransaction(function(n){n.executeSql("SELECT val FROM kv WHERE key=?;",[e],function(e,n){if(!n.rows.length)return t();t(null,n.rows[0].val)},function(e,n){t(n)})})},setItem:function(e,t,n){n=n||o,this.db.transaction(function(o){o.executeSql("INSERT OR REPLACE INTO kv (oid,key,val) VALUES ((SELECT oid FROM kv WHERE key=?), ?, ?);",[e,e,t],function(e,t){n(null,t.insertId)},function(e,t){n(t)})})},removeItem:function(e,t){t=t||o,this.db.transaction(function(n){n.executeSql("DELETE FROM kv WHERE key=?;",[e],function(e,n){t()},function(e,n){t(n)})})},clear:function(e){e=e||o,this.db.transaction(function(t){t.executeSql("DELETE FROM kv;",null,function(t,n){e()},function(t,n){e(n)})})},length:function(e){this.db.readTransaction(function(t){t.executeSql("SELECT count(*) AS len FROM KV;",null,function(t,n){e(null,n.rows[0].len)},function(t,n){e(n)})})}}:(e=function(e){this.prefix=e+"_",this.db=window.localStorage}).prototype={key:function(e,t){t(null,this.db.key(e))},getItem:function(e,t){t(null,this.db.getItem(this.prefix+e))},setItem:function(e,t,n){n=n||o;try{n(null,this.db.setItem(this.prefix+e,t))}catch(e){n(e)}},removeItem:function(e,t){(t=t||o)(null,this.db.removeItem(this.prefix+e))},clear:function(e){(e=e||o)(null,this.db.clear())},length:function(e){e(null,this.db.length)}},__.store=function(t){return t=t||"localstorage",r[t]=r[t]||new e(t)}}__.onReady(e)}(),function(){var e,t,n=!__.env.supportPassive||{capture:!0,passive:!0},o=!1,r=0,i=0,a=function(e){return[e.pageX,e.pageY]},c=function(e){o||(o=!0,e.target.dispatchEvent(__.createEvent("longTap",null,!0)))},u=function(n){o=!1,t=e=a(n.touches[0]),r=window.setTimeout(c,2e3,n)},s=function(e){if(window.clearTimeout(r),!o){var t=Date.now();t-i<300?(e.target.dispatchEvent(__.createEvent("taps",null,!0)),i=0):(e.target.dispatchEvent(__.createEvent("tap",null,!0)),i=t)}},d=function(n){var r=a(n.touches[0]);o?(r[0]>t[0]+9||r[1]>t[1]+9)&&n.target.dispatchEvent(__.createEvent("rub",[r[0]-t[0],r[1]-t[1]],!0)):(r[0]>e[0]+9||r[1]>e[1]+9)&&(o=!0),t=r},l=function(e){o=!0,window.clearTimeout(r)};document.addEventListener("touchstart",u,n),document.addEventListener("touchend",s,n),document.addEventListener("touchmove",d,n),document.addEventListener("touchcancel",l,n)}();
//# sourceMappingURL=bin/lean.min.js.map